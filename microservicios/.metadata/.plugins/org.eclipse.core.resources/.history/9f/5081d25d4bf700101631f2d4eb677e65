package ms_pacientes.mappers;

import org.springframework.stereotype.Component;

import com.example.demo.dto.PacienteRequest;
import com.example.demo.dto.PacienteResponse;
import com.example.demo.enums.EstadoRegistro;
import com.example.demo.mappers.CommonMapper;

import ms_pacientes.pacientes.entities.Paciente;


@Component
public class PacienteMapper implements CommonMapper<PacienteRequest, PacienteResponse, Paciente>  {

	@Override
	public PacienteResponse entityToResponse(Paciente entity) {
		// TODO Auto-generated method stub
		if(entity == null) return null;
		
		String nombre = String.join(" ", entity.getNombre(), entity.getApellidoPaterno(), entity.getApellidoMaterno());
		
		return new PacienteResponse(
				entity.getId(),
				nombre,
				entity.getEdad(),
				entity.getPeso(),
				entity.getEstatura(),
				entity.getImc(),
				entity.getEmail(),
				entity.getTelefono(),
				entity.getDireccion(),
				
				entity.getNumeroExpediente()
				);
	}

	@Override
	public Paciente requestToEntity(PacienteRequest request) {
		// TODO Auto-generated method stub
		if(request == null) return null;
		
		
		
		Paciente paciente = new Paciente();
		
		paciente.setNombre(request.nombre());
		paciente.setApellidoPaterno(request.apellidoPaterno());
		paciente.setApellidoMaterno(request.apellidoMaterno());
		paciente.setEdad(request.edad());
		paciente.setPeso(request.peso());
		paciente.setEstatura(request.estatura());
		//paciente.setImc(request.imc());
		paciente.setEmail(request.email());
		paciente.setTelefono(request.telefono());
		paciente.setDireccion(request.direccion());
		//paciente.setNumeroExpediente(request.numeroExpediente());
		
		paciente.setEstadoRegistro(EstadoRegistro.ACTIVO);
		
		return paciente;
	}
	
	public Paciente requestToEntity(PacienteRequest request, Double imc, String expediente) {
		// TODO Auto-generated method stub
		if(request == null) return null;
		Paciente paciente = requestToEntity(request);
		
		paciente.setImc(imc);
		paciente.setNumeroExpediente(expediente);
		
		return paciente;
		
	}

	@Override
	public Paciente updateEntityFromRequest(PacienteRequest request, Paciente entity) {
		// TODO Auto-generated method stub
		
		if(request == null || entity == null) return null;
		
		entity.setNombre(request.nombre());
		entity.setApellidoPaterno(request.apellidoPaterno());
		entity.setApellidoMaterno(request.apellidoMaterno());
		entity.setEdad(request.edad());
		entity.setPeso(request.peso());
		entity.setEstatura(request.estatura());
		//entity.setImc(request.imc());
		entity.setEmail(request.email());
		entity.setTelefono(request.telefono());
		entity.setDireccion(request.direccion());
		//entity.setNumeroExpediente(request.numeroExpediente());
		//entity.setEstadoRegistro(request.estadoRegistro());
		
		return entity;
	}
	
	public Paciente updateEntityFromRequest(PacienteRequest request, Paciente entity, Double imc, String expediente) {
		// TODO Auto-generated method stub
		
		if(request == null || entity == null) return null;
		
		entity = updateEntityFromRequest(request, entity);
		entity.setImc(imc);
		entity.setNumeroExpediente(expediente);
		
		return entity;
	}

}
